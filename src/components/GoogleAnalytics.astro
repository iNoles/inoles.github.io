---
type Props = { measurementId: string }
const props = Astro.props as Props
const measurementId = props.measurementId
---
<!-- Hidden element to store GA ID -->
<div id="ga-config" data-measurement-id={measurementId} style="display:none;"></div>

<script
  is:inline
  async
  src={`https://www.googletagmanager.com/gtag/js?id=${measurementId}`}
></script>

<script type="text/partytown" is:inline>
  const el = document.getElementById('ga-config');
  const GA_ID = el?.dataset.measurementId;

  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }

  gtag('js', new Date());
  gtag('config', GA_ID);
</script>