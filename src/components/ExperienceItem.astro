---
interface Props {
  name: string;
  date?: string;
  description: string; // job title
  bullets?: string[];
  link?: string;
}

const {
  name,
  date = "",
  description,
  bullets = [],
  link,
} = Astro.props as Props;

const linkClass =
  "hover:underline hover:text-black dark:hover:text-blue-400";
---

<div
  class="mb-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
         rounded-xl shadow-md p-6 transition hover:shadow-lg"
>
  {link ? (
    <h3 class="text-3xl font-bold mb-2 gradient-warm text-gray-900 dark:text-white pb-1">
      <a
        href={link}
        target="_blank"
        rel="noopener noreferrer"
        class={linkClass}
        aria-label={`${name} (opens in a new tab)`}
      >
        {name}
      </a>
    </h3>
  ) : (
    <h3 class="text-3xl font-bold mb-2 gradient-warm text-gray-900 dark:text-white pb-1">
      {name}
    </h3>
  )}

  {/* Job title + date */}
  <div
    class="flex justify-between items-center pb-3 text-md text-gray-700 dark:text-gray-300"
  >
    <span class="font-medium">{description}</span>
    {date && (
      <span class="italic text-gray-600 dark:text-gray-300 text-sm">
        {date}
      </span>
    )}
  </div>

  {/* Bullet pills */}
  {bullets.length > 0 && (
    <div class="space-y-2">
      {bullets.map((bullet, idx) => (
        <span
          key={idx}
          class="flex items-center space-x-2 bg-gray-100 text-gray-800 text-sm font-medium px-3 py-1 rounded-full
                 dark:bg-gray-600 dark:text-white hover:dark:bg-gray-500 hover:bg-gray-200 
                 transition-colors duration-150"
        >
          <span
            class="w-2 h-2 bg-blue-500 dark:bg-blue-400 rounded-full flex-shrink-0"
          ></span>
          <span>{bullet}</span>
        </span>
      ))}
    </div>
  )}
</div>
